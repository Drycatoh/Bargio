var superLocal=function(){"use strict";return{settings:{dbPrefix:"db",dataFieldName:"data",separator:"_",saveType:"relaxed"},prefixRegex:function(){return new RegExp(this.settings.dbPrefix,"g")},createdRegex:function(){return new RegExp("created","g")},modifiedRegex:function(){return new RegExp("modified","g")},datafieldRegex:function(){return new RegExp(this.settings.dataFieldName,"g")},capable:function(){var n="ls";try{return localStorage.setItem(n,n),localStorage.removeItem(n),!0}catch(t){return!1}},findNewest:function(){for(var i,r,u=0,f=0,t=Object.keys(localStorage),e=t.length,n=0;n<e;n++)this.prefixRegex().test(t[n])&&this.modifiedRegex().test(t[n])&&(i=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"modified",""),r=localStorage[this.settings.dbPrefix+this.settings.separator+i+this.settings.separator+"modified"],r>u&&(f=i,u=r));return f},findOldest:function(){for(var r,u,i=0,f=0,t=Object.keys(localStorage),e=t.length,n=0;n<e;n++)this.prefixRegex().test(t[n])&&this.modifiedRegex().test(t[n])&&(r=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"modified",""),u=localStorage[this.settings.dbPrefix+this.settings.separator+r+this.settings.separator+"modified"],(u<i||i===0)&&(f=r,i=u));return f},findSmallest:function(){for(var r,u,i=0,f=0,t=Object.keys(localStorage),e=t.length,n=0;n<e;n++)this.prefixRegex().test(t[n])&&this.datafieldRegex().test(t[n])&&(r=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"modified",""),u=localStorage[this.settings.dbPrefix+this.settings.separator+r+this.settings.separator+this.settings.dataFieldName].length,(u<i||i===0)&&(f=r,i=u));return f},findBiggest:function(){for(var i,r,u=0,f=0,t=Object.keys(localStorage),e=t.length,n=0;n<e;n++)this.prefixRegex().test(t[n])&&this.datafieldRegex().test(t[n])&&(i=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"modified",""),r=localStorage[this.settings.dbPrefix+this.settings.separator+i+this.settings.separator+this.settings.dataFieldName].length,r>u&&(f=i,u=r));return f},fetch:function(n){var i={},t,r;if(n==="newest")t=this.findNewest();else if(n==="oldest")t=this.findOldest();else if(n==="smallest")t=this.findSmallest();else if(n==="biggest")t=this.findBiggest();else if(isNaN(n))t=n;else return!1;return r=this.settings.dbPrefix+this.settings.separator+t+this.settings.separator,i.uID=t,i[this.settings.dataFieldName]=localStorage[r+this.settings.dataFieldName],i.created=localStorage[r+"created"],i.modified=localStorage[r+"modified"],i},remove:function(n){var t=this.settings.dbPrefix+this.settings.separator+n+this.settings.separator;localStorage.removeItem(t+this.settings.dataFieldName);localStorage.removeItem(t+"created");localStorage.removeItem(t+"modified")},clearAll:function(){localStorage.clear()},listAllCreated:function(){for(var i,t=Object.keys(localStorage),u=t.length,r={},n=0;n<u;n++)this.prefixRegex().test(t[n])&&this.createdRegex().test(t[n])&&(i=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"created",""),r[i]=localStorage[this.settings.dbPrefix+this.settings.separator+i+this.settings.separator+"created"]);return r},listAllModified:function(){for(var i,t=Object.keys(localStorage),u=t.length,r={},n=0;n<u;n++)this.prefixRegex().test(t[n])&&this.modifiedRegex().test(t[n])&&(i=t[n].replace(this.settings.dbPrefix+this.settings.separator,"").replace(this.settings.separator+"modified",""),r[i]=localStorage[this.settings.dbPrefix+this.settings.separator+i+this.settings.separator+"modified"]);return r},save:function(n,t,i){if(this.capable()===!0){var u,r=this.settings.dbPrefix+this.settings.separator+n+this.settings.separator;u=typeof i!="undefined"?i:Math.floor((new Date).getTime()/1e3);try{return localStorage.setItem(r+this.settings.dataFieldName,t),localStorage.setItem(r+"modified",u),typeof localStorage[r+"created"]=="undefined"&&localStorage.setItem(r+"created",u),!0}catch(f){return this.remove(n),this.settings.saveType==="greedy"&&(this.remove(this.findOldest()),this.save(n,t,i)),!1}}}}}();